#///////////////////////////////////////////////////////////////////////
#!/bin/bash
#///////////////////////////////////////////////////////////////////////
#
# mp3 -- download audio from a youtube video as mp3 using youtube-dl
#
#///////////////////////////////////////////////////////////////////////
# PATH AND NAME FOR EASE OF USE
#///////////////////////////////////////////////////////////////////////

_path=$0
_name="${_path##*/}"

#///////////////////////////////////////////////////////////////////////
# FUNCTIONS
#///////////////////////////////////////////////////////////////////////

# (NO FUNCTIONS IN THIS SCRIPT)

#///////////////////////////////////////////////////////////////////////
# INTERNAL AFFAIRS
#///////////////////////////////////////////////////////////////////////
#-----------------------------------------------------------------------

if [ $BASH_SOURCE = "$_path" ] ; then # script called directly

  youtube-dl -x --audio-format mp3 --prefer-ffmpeg $1

  if [[ $# -eq 1 ]] ; then #no renaming

    exit 0
  fi

  if [[ $# -ge 2 ]] ; then #rename mp3

    theMP3=$(ls -c | head -n1) #gets a handle on the file
    
    echo
    echo "[move] $theMP3"
    echo "[with] $2"

    mv -f -- "$theMP3" "$2"

    echo "[done] good to go."
    
    exit 0
  fi 
 
  echo Like this: mp3 link name >&2
  exit 1

fi

#-----------------------------------------------------------------------
#///////////////////////////////////////////////////////////////////////
# END OF mp3 â€” 210121.2257 (installed on grips on 220114.0107)
#/////////////////////////////////////////////////////////////////////// 
